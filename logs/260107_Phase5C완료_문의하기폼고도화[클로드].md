# Phase 5C 완료: 문의하기 폼 고도화

**날짜**: 2026-01-07
**작성자**: 클로드
**소요 시간**: 약 20분

---

## ✅ 완료 작업

### 1. 3단계 다단계 폼 구현

**파일**: `app/_components/contact/multi-step-contact-form.tsx` (455 lines)

**단계 구조**:
```
Step 1: 서비스 선택
  ↓
Step 2: 정보 입력 (회사명, 담당자, 연락처, 이메일, 문의내용)
  ↓
Step 3: 확인 및 개인정보 동의
  ↓
제출 완료 (감사 메시지)
```

### 2. 서비스 선택 옵션 (6가지)

| 서비스 ID | 서비스명 | 설명 |
|----------|---------|------|
| viral | 바이럴마케팅 | 네이버 블로그/카페 상위노출 |
| pr | 언론홍보/PR | 주요 언론사 보도자료 배포 |
| crisis | 위기관리 | 부정적 여론 대응 및 관리 |
| influencer | 인플루언서 | 인플루언서 마케팅 기획/실행 |
| youtube | 유튜브 AI 영상 | AI 기반 유튜브 영상 제작 |
| other | 기타 | 상담을 통해 맞춤 제안 |

**UI 특징**:
- 라디오 버튼 카드 형식
- 선택 시 lime-600 테두리 + 체크 아이콘
- 호버 효과 (bg-gray-50)
- 2-column 그리드 (sm 화면 이상)

### 3. Step Indicator (진행 상태 표시)

**구현 요소**:
- 원형 번호 표시 (1, 2, 3)
- 완료 단계: 체크 아이콘 + lime-600 배경
- 현재 단계: lime-600 테두리
- 미완료 단계: gray-300 테두리
- 단계 간 연결선 (완료: lime-600, 미완료: gray-300)
- 단계명 표시 (서비스 선택, 정보 입력, 확인)

### 4. 카카오톡 채널 연동

**위치**: 폼 상단 (Step Indicator 하단)

**디자인**:
- 노란색 배경 (yellow-50)
- 노란색 테두리 (yellow-400)
- MessageCircle 아이콘
- "더 빠른 상담을 원하시나요?" 문구
- "카카오톡 상담" 버튼 (yellow-400 배경)

**링크**: `http://pf.kakao.com/_fIBxmxj/chat` (새 창)

### 5. 폼 검증 강화

**Zod 스키마 검증**:

**서비스 선택** (Step 1):
```typescript
service: z.enum(['viral', 'pr', 'crisis', 'influencer', 'youtube', 'other'], {
  message: '상담 받고 싶은 서비스를 선택해 주세요.',
})
```

**기본 정보** (Step 2):
```typescript
companyName: z.string().min(1, '회사명을 입력해 주세요.')
contactPerson: z.string().min(1, '담당자 성함을 입력해 주세요.')
phone: z.string()
  .min(10, '올바른 연락처를 입력해 주세요.')
  .regex(/^[0-9-]+$/, '숫자와 하이픈만 입력 가능합니다.')
email: z.string().email('올바른 이메일 주소를 입력해 주세요.')
message: z.string()
  .min(10, '문의 내용을 10자 이상 입력해 주세요.')
  .max(1000, '문의 내용은 1000자 이하로 입력해 주세요.')
```

**개인정보 처리방침 동의** (Step 3):
```typescript
privacyPolicy: z.boolean()
  .refine(val => val === true, '개인정보 처리방침에 동의해 주세요.')
```

**단계별 검증**:
- Step 1 → Step 2: service 필드만 검증
- Step 2 → Step 3: 기본 정보 5개 필드 검증
- Step 3 제출: privacyPolicy 검증

### 6. 개인정보 처리방침 동의

**위치**: Step 3 (확인 단계) 하단

**내용**:
- **[필수]** 개인정보 수집 및 이용에 동의합니다.
- 수집 항목: 회사명, 담당자명, 연락처, 이메일, 문의내용
- 이용 목적: 상담 응대 및 서비스 안내
- 보유 기간: 상담 완료 후 1년

**UI**:
- 체크박스 + 텍스트
- lime-600 체크 색상
- 회색 작은 글씨로 상세 정보

### 7. 제출 완료 감사 메시지 개선

**기존**:
- 간단한 텍스트 메시지
- "상담 신청이 완료되었습니다."

**개선**:
- 큰 체크 아이콘 (lime-600 원형 배경)
- "상담 신청이 완료되었습니다!" (2xl, bold)
- 감사 메시지 2줄
- "새 상담 신청하기" 버튼 추가

### 8. 기타 UI 개선

**Step 2 (정보 입력)**:
- focus 상태: lime-500 테두리 + ring
- 필수 필드 표시 (`*` 붉은색)
- placeholder 텍스트 추가
- 2-column 그리드 (sm 화면 이상)

**네비게이션**:
- "이전 단계" 버튼 (흰색 배경, 회색 테두리)
- "다음 단계" / "상담 신청하기" 버튼 (lime-600 배경)
- ChevronRight 아이콘

**에러 메시지**:
- 붉은색 배경 (red-50)
- 붉은색 테두리 (red-300)
- 대체 연락 방법 안내 (전화/이메일)

### 9. contact 페이지 수정

**파일**: `app/contact/page.tsx`

**변경 사항**:
- import: `ContactForm` → `MultiStepContactForm`
- 제목: "간편 상담 신청 (폼)" → "상담 신청 (3단계 폼)"
- 컴포넌트 교체: `<ContactForm />` → `<MultiStepContactForm />`

### 10. 빌드 & 배포

- ✅ 빌드 성공 (13 페이지)
- ✅ 커밋 & Push 완료 (commit: c00835f)
- ✅ Vercel 배포 진행 중 (~30초 예상)

---

## 📊 Phase 5C 최종 결과

| Task | 상태 | 완료일 |
|------|-----|--------|
| 1. 현재 폼 분석 | ✅ 완료 | 2026-01-07 |
| 2. 다단계 폼 UI 설계 | ✅ 완료 | 2026-01-07 |
| 3. Step 1: 서비스 선택 구현 | ✅ 완료 | 2026-01-07 |
| 4. Step 2: 정보 입력 구현 | ✅ 완료 | 2026-01-07 |
| 5. Step 3: 확인 및 동의 구현 | ✅ 완료 | 2026-01-07 |
| 6. 카카오톡 채널 연동 | ✅ 완료 | 2026-01-07 |
| 7. 개인정보 처리방침 추가 | ✅ 완료 | 2026-01-07 |
| 8. 감사 메시지 개선 | ✅ 완료 | 2026-01-07 |
| 9. 빌드 및 테스트 | ✅ 완료 | 2026-01-07 |
| 10. Git 커밋 및 배포 | ✅ 완료 | 2026-01-07 |

**Phase 5C 전체 진행률**: 100% ✅

---

## 🎯 변경 사항 요약

### 신규 파일 (1개)

**`app/_components/contact/multi-step-contact-form.tsx`** (455 lines):
- MultiStepFormData 타입 정의
- multiStepSchema Zod 스키마 (서비스, 기본 정보, 동의)
- StepIndicator 컴포넌트 (진행 상태 표시)
- 3단계 폼 UI (서비스 선택, 정보 입력, 확인)
- 카카오톡 채널 바로가기
- 제출 처리 및 감사 메시지

### 수정 파일 (1개)

**`app/contact/page.tsx`** (+3 lines, -4 lines):
- import 변경: ContactForm → MultiStepContactForm (라인 5)
- 제목 수정 (라인 90)
- 컴포넌트 교체 (라인 98)

**총 변경**:
- +455 lines (신규 컴포넌트)
- +3 lines (페이지 통합)
- -4 lines (기존 import 제거)
- 2 files changed

---

## 🚀 배포 정보

- **커밋**: c00835f
- **메시지**: feat: Phase 5C 문의하기 폼 고도화
- **변경 파일**: 2개
- **배포 상태**: 진행 중 (약 30초 소요 예상)

---

## 📝 기술 노트

### Step Indicator 구현

**진행 상태 시각화**:
```typescript
<div className="flex items-center justify-between">
  {Array.from({ length: totalSteps }, (_, i) => i + 1).map((step) => (
    <div key={step} className="flex items-center flex-1">
      <div className={`rounded-full ${
        step < currentStep ? 'bg-lime-600 text-white' :
        step === currentStep ? 'border-lime-600 text-lime-600' :
        'border-gray-300 text-gray-300'
      }`}>
        {step < currentStep ? <Check /> : step}
      </div>
      {step < totalSteps && (
        <div className={`flex-1 h-0.5 ${
          step < currentStep ? 'bg-lime-600' : 'bg-gray-300'
        }`} />
      )}
    </div>
  ))}
</div>
```

### 단계별 검증 로직

```typescript
const handleNext = async () => {
  let isValid = false;

  if (currentStep === 1) {
    isValid = await trigger('service'); // 서비스만 검증
  } else if (currentStep === 2) {
    isValid = await trigger([
      'companyName', 'contactPerson', 'phone', 'email', 'message'
    ]); // 기본 정보 5개 검증
  }

  if (isValid) {
    setCurrentStep(currentStep + 1);
  }
};
```

### 카카오톡 채널 연동

```typescript
<a
  href="http://pf.kakao.com/_fIBxmxj/chat"
  target="_blank"
  rel="noopener noreferrer"
  className="bg-yellow-400 hover:bg-yellow-500"
>
  카카오톡 상담
</a>
```

### 서비스 선택 UI

**라디오 버튼 카드**:
```typescript
<label className={`cursor-pointer rounded-lg border p-4 ${
  selectedService === service.id
    ? 'border-lime-600 bg-lime-50'
    : 'border-gray-300'
}`}>
  <input type="radio" value={service.id} className="sr-only" />
  <div className="flex flex-1 items-center">
    <div className="flex-1">
      <span className="font-semibold">{service.name}</span>
      <span className="text-sm text-gray-600">{service.description}</span>
    </div>
    {selectedService === service.id && (
      <div className="bg-lime-600 rounded-full">
        <Check className="text-white" />
      </div>
    )}
  </div>
</label>
```

---

## 🔍 개선 필요 사항 (Phase 5 후속 작업)

### 1. API 엔드포인트 구현
- 현재: `/contact/api/send` 엔드포인트 미구현 (에러 발생)
- 개선: Next.js API Route로 이메일 전송 구현
- 옵션: Resend, SendGrid, Nodemailer 등 활용

### 2. 서비스별 맞춤 질문
- 현재: 모든 서비스 동일한 폼
- 개선: 서비스별 추가 질문 (예산, 기간, 목표 등)

### 3. 폼 제출 추적
- Google Analytics 이벤트 트래킹
- 전환율 분석 (Step별 이탈률)

### 4. 자동 응답 이메일
- 제출 즉시 고객에게 확인 이메일 발송
- 예상 응답 시간 안내

### 5. 관리자 알림
- 새 상담 신청 시 SMS/카카오톡 알림
- 슬랙 채널 연동

---

## 🎉 완료

**Phase 5C 완료!** 3단계 다단계 폼, 카카오톡 채널 연동, 개인정보 동의 등이 모두 추가되었습니다.

**다음 단계**: Phase 5D (블로그/뉴스 섹션)

**남은 Phase 5 작업**:
- Option D: 블로그/뉴스 섹션
- Option E: 추가 기능 (i18n, dark mode, animations)
